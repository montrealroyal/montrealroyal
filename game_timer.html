
<!-- saved from url=(0106)http://tingo.ddns.net:4005/game_timer?fbclid=IwAR0cTRD9OnhhM7goQAqKq6WB1pGKFmXgBL0xBLN8wR5LdLX9DLs_2Wg0Zxw -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            #warning_message {
                color: red;
                font-weight: bold;
                display: none;
            }
            * {
                font-size: 20px;
            }
            button {
                padding: 10px;
                margin: 20px;
            }
        </style>
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <h1>Game Timer</h1>
        <div> <button id="quart" disabled="disabled">Q1</button>
        <input type="text" id="timer_input" value="00:00" onkeyup="manual_reset();"></div><br>
        <button onclick="reset_timer();">Reset</button>
        <button onclick="play_pause_timer();" id="play_pause_btn">Play</button>
        <div id="warning_message">Please pause before a manual reset</div>
    
        <div>
            <button onclick="q1();" id="q1">Q1</button>
            <button onclick="q2();" id="q2">Q2</button>
            <button onclick="q3();" id="q3">Q3</button>
            <button onclick="q4();" id="q3">Q4</button>

        </div>
        <div>
            <h1>AWAY</h1>
            <input type="text" id="awayscore" value="0"><br>
            <button onclick="Awayplus();" id="Awayplus">+</button>
            <button onclick="Awayminus();" id="Awayminus">-</button>
        </div>
        <div>
            <h1>HOME - MTL</h1>
            <input type="text" id="homescore" value="0"><br>
        <button onclick="Homeplus();" id="Homeplus">+</button>
        <button onclick="Homeminus();" id="Homeplus">-</button>
        </div>
        <div id="warning_message">Please pause before a manual reset</div>

    <!-- Import jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        var latest_timer = 678;
        var playing = false;
        function show_timer() {
            var minutes = Math.floor(latest_timer / 60);
            var seconds = (latest_timer % 60);
            if (seconds < 10) {seconds = "0" + seconds;}
            if (minutes < 10) {minutes = "0" + minutes;}
            $("#timer_input").val(minutes + ":" + seconds);
        }
        function reset_timer() {
            latest_timer = 12*60;
            push_timer();
            show_timer();
        }
        function play_pause_timer() {
            playing = !playing;
            if(playing) {
                $("#play_pause_btn").html("Pause");
            }
            else {
                $("#play_pause_btn").html("Play");
            }
        }
        function manual_reset() {
            if(playing) {
                $("#warning_message").show();
                return;
            }
            else {$("#warning_message").hide();}
            var input = $("#timer_input").val();
            var toks = input.split(":");
            if(toks.length == 2) {
                var minutes = parseInt(toks[0]);
                var seconds = parseInt(toks[1]);
                if(minutes >= 0 && seconds >= 0) {
                    latest_timer = minutes*60 + seconds;
                    push_timer();
                }
            }

            show_timer();
        }
        setInterval(function() {
            if (playing) {
                if(latest_timer > 0) {
                    latest_timer--;
                    push_timer();
                    show_timer();
                }
            }
        }, 1000);


        function Awayplus() {
            var counter = parseInt($("#awayscore").val());
            counter++;
                $("#awayscore").val(counter);
        }
        function Awayminus() {
            var counter = parseInt($("#awayscore").val());
            counter--;
                $("#awayscore").val(counter);
        }

        function Homeplus() {
            var counter = parseInt($("#homescore").val());
            counter++;
                $("#homescore").val(counter);
        }
        function Homeminus() {
            var counter = parseInt($("#homescore").val());
            counter--;
                $("#homescore").val(counter);
        }

        function q1(){
            $("#quart").html("Q1")
        }     
        function q2(){
            $("#quart").html("Q2")
        }     
        function q3(){
            $("#quart").html("Q3")
        }     
        function q4(){
            $("#quart").html("Q4")
        }     


        function push_timer() {
            $.getJSON("http://tingo.ddns.net:4005/game_update_timer/"+latest_timer);
        }
        show_timer();

    </script>
</body></html>